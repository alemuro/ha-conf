# Config needed to work

homeassistant:
  name: Casa
  latitude: !secret latitude
  longitude: !secret longitude
  elevation: 102
  unit_system: metric
  time_zone: Europe/Madrid
  # customize: !include customize.yaml
  whitelist_external_dirs:
    - /tmp/

logger:
  default: info

config:

system_health:

frontend:
  themes: !include_dir_merge_named themes

http:
  base_url: aleix.casa
  use_x_forwarded_for: true
  trusted_proxies: 127.0.0.1
  # ip_ban_enabled: true
  # login_attempts_threshold: 3

# prometheus:
#   namespace: hass
#   component_config_glob:
#     sensor.solar_angle:
#       override_metric: sensor_unit_degrees

history:
  exclude:
    domains:
      - automation
      - script
    entities:
      - sensor.date
      - sensor.date_time
      - sensor.date_time_iso
      - sensor.time_date
      - sensor.internet_time
      - sensor.time
      - sensor.time_at_home
      - sensor.time_at_work
      - sensor.time_other
      - sensor.time_utc

recorder:
  db_url: !secret db_mysql_url
  purge_keep_days: 1
  purge_interval: 1

logbook:

api:

auth:

duckdns:
  domain: hass-amurtra
  access_token: !secret duckdns_api_key

lovelace:
  mode: yaml

person:
  - name: Aleix
    id: aleix
    user_id: b87122c56ad8422db17a948a2e61c407
    device_trackers:
      - device_tracker.aleix_mobil
  - name: Imma
    id: imma
    user_id: 3824b6d26b9e463e9b0627c658bca45b

alarm_control_panel:
  - platform: manual
    name: home
    code: 1234

# shopping_list:

#google:
#  client_id: !secret google_oauth_calendar_id
#  client_secret: !secret google_oauth_calendar_secret

# Notifications

telegram_bot:
  - platform: polling
    api_key: !secret telegram_api_key
    allowed_chat_ids:
      - !secret telegram_chat_aleix
      - !secret telegram_chat_imma

notify:
  - name: "Xat Aleix"
    platform: telegram
    chat_id: !secret telegram_chat_aleix
  - name: "Xat Imma"
    platform: telegram
    chat_id: !secret telegram_chat_imma
  - name: "Grup casa"
    platform: telegram
    chat_id: !secret telegram_chat_casa

# Variables

input_text: !include devices/input_text.yaml
input_select: !include devices/input_select.yaml

# Services

sun:

weather:
  - platform: darksky
    api_key: !secret darksky_api_key

ifttt:
  key: !secret ifttt_api_key

tts:
  - platform: google_translate
    service_name: google_say
    language: es

google_assistant:
  project_id: !secret google_project_id
  api_key: !secret google_api_key
  expose_by_default: true

wake_on_lan:

mqtt:
  broker: !secret mqtt_ip
  port: !secret mqtt_port
  username: !secret mqtt_username
  password: !secret mqtt_password

speedtestdotnet:

map:

# Devices

xiaomi_aqara:
  discovery_retry: 10
  gateways:
    - key: !secret xiaomi_gateway_key
      mac: !secret xiaomi_gateway_mac
      host: !secret xiaomi_gateway_ip

cast:
  media_player:
    - host: !secret ip_chromecast
    - host: !secret ip_google_home

sonoff:
  username: !secret ewelink_username
  password: !secret ewelink_password
  scan_interval: 60
  grace_period: 600
  api_region: 'eu'
  entity_prefix: True
  debug: True

alexa: !include devices/alexa.yaml

light: !include devices/lights.yaml
switch: !include devices/switches.yaml
sensor: !include devices/sensors.yaml
camera: !include devices/cameras.yaml
climate: !include devices/climates.yaml
media_player: !include devices/media_players.yaml

webostv:
  host: !secret ip_tele_menjador
  name: Tele
  turn_on_action:
    service: wake_on_lan.send_magic_packet
    data:
      mac: "A8-23-FE-27-CB-A5"

# Other config

scene: !include scenes.yaml
group: !include groups.yaml
automation: !include_dir_list automations/
script: !include_dir_merge_named scripts/
zone: !include zones.yaml
timer: !include timers.yaml
